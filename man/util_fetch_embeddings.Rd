% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/util_fetch_embeddings.R
\name{util_fetch_embeddings}
\alias{util_fetch_embeddings}
\title{Fetch embeddings (Hugging Face utility)}
\usage{
util_fetch_embeddings(corpus, by, api_token, api_url)
}
\arguments{
\item{corpus}{A data frame or data.table with a \code{text} column and the identifiers specified in \code{by}.}

\item{by}{Character vector of column names that identify each text unit.
These are collapsed into row names of the returned matrix (e.g. \code{"doc_1_para_2"}).}

\item{api_token}{Your Hugging Face API token (see \url{https://huggingface.co/settings/tokens}).}

\item{api_url}{The inference endpoint URL (e.g. \code{"https://api-inference.huggingface.co/models/sentence-transformers/all-MiniLM-L6-v2"}).}
}
\value{
A numeric matrix with one row per corpus row; \code{rownames} are the collapsed \code{by} identifiers.
}
\description{
A lightweight wrapper to convert a textpress corpus into an embedding matrix
suitable for the \code{embeddings} argument of \code{\link{search_vector}}.
Uses your Hugging Face API token and endpoint; no retries or batching.
API stability and rate limits are the user's responsibility.
}
\examples{
\dontrun{
corpus <- data.frame(doc_id = c("1", "2"), text = c("First document.", "Second document."))
url <- "https://api-inference.huggingface.co/models/sentence-transformers/all-MiniLM-L6-v2"
m <- util_fetch_embeddings(corpus, by = "doc_id", api_token = "hf_xxx", api_url = url)
search_vector(m, "1", n = 2)
}
}
